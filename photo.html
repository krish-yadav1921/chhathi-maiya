<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Chhath Puja Moments â€” 3D Carousel</title>
  <meta name="description" content="Chhath Puja 3D photo carousel with sunrise + river reflection animation. Manual stylish controls, 20 photos."/>
  <style>
    /* ========== Basic Reset ========== */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family: 'Poppins', system-ui, -apple-system, 'Segoe UI', Roboto, Arial;
      background: linear-gradient(180deg,#fff4e6 0%, #ffe1b3 10%, #ffd480 30%, #fff6e0 60%);
      color:#2b1500;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px;
    }

    /* ========== Scenic animated background (sun + river) ========== */
    .scene{
      position:fixed;inset:0;z-index:0;pointer-events:none;
      overflow:hidden;
    }
    .scene::before{
      content:'';position:absolute;inset:0;
      background: radial-gradient(circle at 50% 25%, rgba(255,220,140,0.9) 0%, rgba(255,180,80,0.25) 18%, rgba(255,130,20,0.06) 40%, transparent 60%);
      mix-blend-mode:screen;
      opacity:0.95;
    }
    .sun{
      position:absolute;left:50%;top:20%;
      width:160px;height:160px;border-radius:50%;
      transform:translateX(-50%);
      background: radial-gradient(circle, #fff7c4 0%, #ffd36a 30%, #ff9b2b 60%, #ff7a00 100%);
      filter:blur(6px);
      box-shadow:0 0 80px rgba(255,140,0,0.5), 0 10px 50px rgba(255,110,0,0.15) inset;
      animation: sunMove 12s linear infinite alternate;
      z-index:0;
      opacity:0.95;
    }
    @keyframes sunMove{
      0% { transform: translateX(-50%) translateY(-6vh) scale(.9); }
      50%{ transform: translateX(-30%) translateY(0vh) scale(1.05); }
      100%{ transform: translateX(-50%) translateY(6vh) scale(.95); }
    }
    .river{
      position:absolute;left:0;right:0;bottom:0;height:38%;
      background:
        radial-gradient(ellipse at 50% 10%, rgba(255,220,140,0.08) 0%, transparent 20%),
        linear-gradient(180deg, rgba(255,240,210,0.08), rgba(255,180,80,0.06));
      z-index:0;
      overflow:hidden;
      backdrop-filter: blur(0.6px);
    }
    .river::before{
      content:'';position:absolute;inset:0;
      background-image:
        linear-gradient(transparent 70%, rgba(255,200,120,0.06) 71%),
        repeating-linear-gradient( -60deg, rgba(255,255,255,0.03) 0 6px, transparent 6px 18px ),
        linear-gradient(180deg, rgba(255,170,60,0.06), rgba(255,110,20,0.03));
      background-size:100% 100%, 200% 100%, 100% 100%;
      animation: wave 7s linear infinite;
      opacity:0.95;
      mix-blend-mode:overlay;
      transform-origin:center;
    }
    @keyframes wave{
      0%{ background-position:0% 0%, 0% 0%, 0% 0%;}
      50%{ background-position:50% 0%, 50% 0%, 0% 0%;}
      100%{ background-position:100% 0%, 100% 0%, 0% 0%;}
    }
    .river .reflection{
      position:absolute;left:50%;top:-6%;width:260px;height:280px;
      transform:translateX(-50%) rotate(0deg);
      background: radial-gradient(ellipse at 50% 10%, rgba(255,240,180,0.35), rgba(255,200,100,0.12) 30%, transparent 55%);
      filter:blur(12px) saturate(1.2);
      opacity:0.7;
      animation: reflectShift 9s ease-in-out infinite;
    }
    @keyframes reflectShift{
      0%{ transform:translateX(-50%) translateY(0) scale(1); opacity:0.66}
      50%{ transform:translateX(-46%) translateY(6px) scale(1.02); opacity:0.9}
      100%{ transform:translateX(-50%) translateY(0) scale(1); opacity:0.66}
    }

    /* ========== Card container ========== */
    .stage{
      position:relative;z-index:2;width:min(1200px,96vw);margin:0 auto;
      background: linear-gradient(180deg, rgba(255,255,255,0.65), rgba(255,245,230,0.6));
      border-radius:20px;padding:28px 28px 18px;border:1px solid rgba(255,160,60,0.15);
      box-shadow: 0 30px 90px rgba(20,10,5,0.14), inset 0 1px 0 rgba(255,255,255,0.5);
      overflow:visible;
    }

    header.title{
      text-align:center;margin-bottom:12px;
    }
    header.title h1{
      font-size:clamp(22px,3.6vw,36px);
      letter-spacing:0.6px;color:#592600;
      margin-bottom:6px;
    }
    header.title p{color:#6b3a18;opacity:0.95;font-size:14px}

    /* carousel viewport */
    .carousel-viewport{
      position:relative;height:360px;display:flex;align-items:center;justify-content:center;
      perspective:1400px; /* important for 3d feel */
      overflow:hidden;
    }

    /* track holds cards */
    .track{
      position:relative;display:flex;align-items:center;gap:18px;transition:transform .6s cubic-bezier(.22,.9,.28,1);
      will-change:transform;
      padding:24px 12px;
      /* allow smooth hardware accel */
      transform: translateZ(0);
    }

    .card{
      width:280px;height:340px;border-radius:14px;overflow:hidden;background:#fff;flex:0 0 auto;
      transform-origin:center center;transition:transform .6s cubic-bezier(.22,.9,.28,1), filter .4s, opacity .35s;
      box-shadow:0 10px 30px rgba(40,18,6,0.15);
      display:flex;align-items:flex-end;justify-content:center;position:relative;
      cursor:pointer;
    }
    .card img{width:100%;height:100%;object-fit:cover;display:block;transform:translateZ(0);}

    /* caption badge */
    .badge{
      position:absolute;left:14px;bottom:12px;padding:8px 12px;border-radius:999px;
      background: linear-gradient(90deg, rgba(255,140,0,0.98), rgba(255,205,100,0.9));
      color:white;font-weight:700;font-size:13px;box-shadow:0 8px 22px rgba(255,140,0,0.12);
      text-shadow:0 2px 8px rgba(0,0,0,0.18);
    }

    /* inactive side cards smaller + rotated + blurred */
    .card.side{
      transform: translateY(6px) scale(.84) rotateY(12deg);
      filter: blur(2px) saturate(.95) brightness(.96);
      opacity:0.72;
    }
    .card.side-left{ transform: translateY(6px) scale(.84) rotateY(-12deg); }
    .card.side-left img, .card.side img{transform-origin:center center}

    /* further side (farther left/right) */
    .card.far{
      transform: translateY(18px) scale(.66) rotateY(20deg);
      filter: blur(4px) saturate(.8) brightness(.86);
      opacity:0.46;
    }

    /* center card prominent */
    .card.center{
      transform: translateY(-6px) scale(1.08) rotateY(0deg);
      box-shadow:0 30px 60px rgba(255,140,0,0.16);
      z-index:6;
      opacity:1;filter:none;
    }

    /* responsive adjustments */
    @media (max-width:900px){
      .card{width:220px;height:300px}
      .carousel-viewport{height:300px}
    }
    @media (max-width:560px){
      .card{width:180px;height:230px}
      .carousel-viewport{height:260px}
      .stage{padding:18px}
    }

    /* controls */
    .controls{
      display:flex;gap:12px;align-items:center;justify-content:center;margin-top:12px;
    }
    .btn{
      background:linear-gradient(180deg,#ff9f2e,#ff6a00);
      border:none;padding:10px 16px;border-radius:12px;color:#fff;font-weight:700;cursor:pointer;
      box-shadow:0 8px 28px rgba(255,120,0,0.18);transform:translateZ(0);
      transition:transform .18s ease, box-shadow .18s ease;
    }
    .btn:hover{transform:translateY(-4px);box-shadow:0 18px 40px rgba(255,120,0,0.26)}
    .btn:active{transform:translateY(-1px) scale(.99)}

    .arrow{display:inline-flex;align-items:center;gap:8px}
    .kbd{background:rgba(255,255,255,0.9);color:#7a3a00;padding:6px 8px;border-radius:8px;font-weight:700;font-size:12px}

    /* lightbox overlay */
    .lightbox{
      position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.78);z-index:50;
    }
    .lightbox.open{display:flex}
    .lightbox img{max-width:92%;max-height:86vh;border-radius:10px;box-shadow:0 30px 90px rgba(0,0,0,0.6)}
    .lightbox .close{position:absolute;top:22px;right:26px;background:none;border:none;color:white;font-size:34px;cursor:pointer}

    /* thumbnails (photo-gallery) */
    .photo-gallery{
      margin-top:14px;
      display:grid;
      grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
      gap:10px;
      align-items:center;
    }
    .photo-gallery img {
      width:100%;
      height:80px;
      object-fit:cover;
      border-radius:10px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.12);
      transition: transform 0.22s ease, box-shadow 0.22s ease, opacity 0.18s ease;
      cursor:pointer;
      border:2px solid rgba(255,255,255,0.6);
    }
    .photo-gallery img:hover { transform: scale(1.06); box-shadow: 0 10px 30px rgba(0,0,0,0.18); opacity:0.98 }

    .note{margin-top:8px;text-align:center;color:#6b3a18;font-size:13px}
  </style>
</head>
<body>
  <div class="scene" aria-hidden="true">
    <div class="sun" role="img" aria-label="Rising sun"></div>
    <div class="river" aria-hidden="true">
      <div class="reflection"></div>
    </div>
  </div>

  <main class="stage" role="main" aria-label="Chhath Puja photo gallery">
    <header class="title">
      <h1>ðŸŒ… Chhath Puja Moments</h1>
     
    </header>

    <div class="carousel-viewport" id="viewport">
      <div class="track" id="track" aria-live="polite" aria-atomic="true">
        <!-- Cards generated by JS -->
      </div>
    </div>

    <div class="controls" aria-hidden="false">
      <button class="btn" id="prevBtn" aria-label="Previous image">â€¹ Prev</button>
      <div style="width:16px"></div>
      <button class="btn" id="nextBtn" aria-label="Next image">Next â€º</button>
    </div>

    <!-- Thumbnails: replace src with your real images -->
    <div class="photo-gallery" id="gallery">
        <!-- Example thumbnails (replace with your actual files or URLs) -->
        <img src="image1.jpg" alt="">
        <img src="image2.jpg" alt="">
        <img src="image3.webp" alt="">
        <img src="image4.webp" alt="">
        <img src="image5.webp" alt="">
        <img src="image6.jpg" alt="">
   
    </div>

    
  </main>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox" role="dialog" aria-modal="true" aria-hidden="true">
    <button class="close" id="lbClose" aria-label="Close">Ã—</button>
    <img id="lbImg" src="" alt="Expanded photo">
  </div>

  <script>
    // ====== Build carousel from thumbnails (if any) ======
    const gallery = Array.from(document.querySelectorAll('#gallery img'));
    const track = document.getElementById('track');
    let current = 0;
    let cards = [];

    // Source images: prefer gallery thumbnails; if none found, fallback to images/1..n
    const sources = (gallery.length > 0) ? gallery.map(img => ({src: img.src, alt: img.alt})) : (() => {
      // fallback: try 8 images
      const arr = [];
      for(let i=1;i<=8;i++) arr.push({src:`images/${i}.jpg`, alt:`Photo ${i}`});
      return arr;
    })();

    // create cards
    sources.forEach((s, idx) => {
      const card = document.createElement('div');
      card.className = 'card';
      card.dataset.index = idx;
      const img = document.createElement('img');
      img.src = s.src;
      img.alt = s.alt || `Photo ${idx+1}`;
      img.loading = 'lazy';
      const badge = document.createElement('div');
      badge.className = 'badge';
      badge.textContent = `Photo ${idx+1}`;
      card.appendChild(img);
      card.appendChild(badge);
      track.appendChild(card);

      // click opens lightbox
      card.addEventListener('click', ()=> openLightbox(img.src, img.alt));

      cards.push(card);
    });

    const total = cards.length;

    // if thumbnails exist, clicking them centers the carousel
    gallery.forEach((thumb, i) => {
      thumb.addEventListener('click', (e)=>{
        current = i;
        render();
        // flash a focus for accessibility
        cards[current].focus?.();
      });
      // if image fails to load, show placeholder
      thumb.addEventListener('error', ()=> {
        thumb.src = 'data:image/svg+xml;utf8,' + encodeURIComponent(`
          <svg xmlns='http://www.w3.org/2000/svg' width='600' height='400'>
            <rect width='100%' height='100%' fill='#fff2e6'/>
            <text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-size='20' fill='#b86a12' font-family='Arial'>Image not found</text>
          </svg>`);
      });
    });

    // render positions
    function render(){
      if(!cards.length) return;
      // measure one card width including gap
      const gap = 18; // keep consistent with CSS
      const cardRect = cards[0].getBoundingClientRect();
      const cardWidth = cardRect.width;
      const totalCardWidth = cardWidth + gap;

      // center the current card in viewport
      const viewport = document.getElementById('viewport');
      const viewportW = viewport.clientWidth;
      const offset = (current * totalCardWidth) - ( (viewportW - cardWidth) );
      track.style.transform = `translateX(${-Math.round(offset)}px)`;

      // per-card classes
      cards.forEach((c, idx)=>{
        c.classList.remove('center','side','side-left','far');
        c.style.zIndex = '';
        c.style.opacity = 1;
        c.style.pointerEvents = 'auto';
        const d = idx - current;
        if(d === 0){
          c.classList.add('center');
          c.style.zIndex = 6;
        } else if(Math.abs(d) === 1){
          c.classList.add('side');
          c.style.zIndex = 5 - Math.abs(d);
          if(d === -1) c.classList.add('side-left');
        } else if(Math.abs(d) === 2){
          c.classList.add('far');
          c.style.zIndex = 3 - Math.abs(d);
        } else {
          // fade distant cards
          c.style.opacity = 0;
          c.style.pointerEvents = 'none';
          c.style.zIndex = 1;
        }
      });
    }

    // initial center near middle
    current = Math.floor(total/2);
    if(total===0) current = 0;
    // initial render after load
    window.addEventListener('load', ()=> {
      setTimeout(render, 80);
    });

    // controls
    document.getElementById('prevBtn').addEventListener('click', ()=> {
      current = Math.max(0, current - 1);
      render();
    });
    document.getElementById('nextBtn').addEventListener('click', ()=> {
      current = Math.min(total -1, current + 1);
      render();
    });

    // keyboard
    document.addEventListener('keydown', (e)=>{
      if(e.key === 'ArrowLeft') { current = Math.max(0, current - 1); render(); }
      if(e.key === 'ArrowRight'){ current = Math.min(total -1, current + 1); render(); }
      if(e.key === 'Escape') closeLightbox();
    });

    // resize
    let resizeTimer;
    window.addEventListener('resize', ()=> {
      clearTimeout(resizeTimer);
      resizeTimer = setTimeout(render, 120);
    });

    // Lightbox
    const lightbox = document.getElementById('lightbox');
    const lbImg = document.getElementById('lbImg');
    const lbClose = document.getElementById('lbClose');

    function openLightbox(src, alt){
      lbImg.src = src;
      lbImg.alt = alt || '';
      lightbox.classList.add('open');
      lightbox.style.display = 'flex';
      lightbox.setAttribute('aria-hidden','false');
      document.body.style.overflow = 'hidden';
    }
    function closeLightbox(){
      lightbox.classList.remove('open');
      lightbox.style.display = 'none';
      lightbox.setAttribute('aria-hidden','true');
      lbImg.src = '';
      document.body.style.overflow = '';
    }
    lbClose.addEventListener('click', closeLightbox);
    lightbox.addEventListener('click', (e)=> { if(e.target === lightbox) closeLightbox(); });

    // fallback placeholders for cards whose images fail
    cards.forEach((c)=>{
      const img = c.querySelector('img');
      img.addEventListener('error', ()=> {
        img.src = 'data:image/svg+xml;utf8,' + encodeURIComponent(`
          <svg xmlns='http://www.w3.org/2000/svg' width='1200' height='800'>
            <rect width='100%' height='100%' fill='#fff2e6'/>
            <text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-size='36' fill='#b86a12' font-family='Arial'>Image not found</text>
          </svg>`);
      });
    });

    // optional: click a thumbnail to highlight the active thumbnail visually
    function updateThumbnailHighlight(){
      gallery.forEach((t, i)=> {
        if(i === current) t.style.boxShadow = '0 10px 30px rgba(255,140,0,0.28)';
        else t.style.boxShadow = '0 4px 20px rgba(0,0,0,0.12)';
      });
    }
    // call after every render
    const originalRender = render;
    render = function(){ originalRender(); updateThumbnailHighlight(); };

    // initial thumbnail highlight
    setTimeout(()=>{ updateThumbnailHighlight(); }, 160);
  </script>
</body>
</html>

